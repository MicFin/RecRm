<!-- Set variables for end_appointment.js.erb call -->
<% @surveyable ||= surveyable %>
<% @survey ||= survey %>

<%= form_for [@surveyable, @survey], remote: true do |f| %>
  <% if @survey.errors.any? %>
    <div class="error_messages">
      <h2>Please correct the following errors.</h2>
      <ul>
      <% @survey.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div id="survey-questions-container" class="row">
    <%@survey.questions.order("position").each do |question| %>
      <div id="survey-question-container-<%=question.id%>"class="col-xs-12">
        <% if question.question_type == "Response" %>
          <%= render "/surveys/question_types/question_type_response", question: question %>
        <% elsif question.question_type == "Short Response"%>
          <%= render "/surveys/question_types/question_type_short_response", question: question %>
        <% elsif question.question_type == "Check Box" %>
          <%= render "/surveys/question_types/question_type_check_box", question: question %>
        <% elsif question.question_type == "Drop Down"%>
          <%= render "/surveys/question_types/question_type_drop_down", question: question  %>
        <% elsif question.question_type == "Radio"%>
          <%= render "/surveys/question_types/question_type_radio", question: question %>
        <% else %>
        <% end %>
        <%=f.hidden_field :completed, value: true %>
      </div>
    <% end %>
  </div>
  <div class="row">
    <div class="actions col-xs-4 col-xs-offset-4 text-center">
      <%= f.submit "Save", class: "btn btn-success btn-lg" %>
    </div>
  </div>
<% end %>