
// update steps list
$("#steps-container").replaceWith("<%= j render(:partial => 'steps_list') %>");
// FormValidations.sortableIngredientList();
// method would not work so had to manually input sortable 
$(".steps-sortable").sortable({
        placeholder: "ui-state-highlight",
        connectWith: ".steps-sortable",
        start: function(e, ui){
            ui.placeholder.height(ui.item.height())
        },
        axis: 'y',
        update: function() {
          return $.post($(this).data('update-url'), $(this).sortable("serialize"))
        }
      });
$( ".steps-sortable" ).disableSelection();
$( ".delete-step-group" ).on("click", function(e){
  e.preventDefault();
  if ($(this).parent().parent().next().children().children().length <= 0){
    $(this).parent().parent().remove();
  }else{
    alert("Oops! You should not delete a group that has steps in it. Please rearrange your steps or change the name of the group.")
  };
});


// show next button
$(".hidden-form").show();
// get new steps form//
$.ajax({
   type: "GET",
   datatype: "script",
   url: "/recipe_steps/new",
   data: {recipe_id:"<%=@recipe_id%>"},
   success: function(response){
    // could alert that step was created
   } 
});
// update breadcrumb steps now enabled
$("#breadcrumb-steps").removeClass("disabled");
$("#breadcrumb-steps").tooltip("disable");
// set next button from hidden form
// if next button is clicked then go to tag allergens
$(".next-button").on("click", function(){
  // go to add allergens 
  $.ajax({
     type: "GET",
     datatype: "script",
     url: "/ingredients/edit_allergens/<%=@recipe_id%>",
     data: {recipe_id:"<%=@recipe_id%>"},
     success: function(response){
      // after loaded then replace breadcrumbs
      $("#recipe-breadcrumb").replaceWith("<%= j render(:partial => 'recipes/new_recipe_breadcrumbs') %>");
      RecipeBreadcrumb.setUp();
    }
  });
  $("html, body").animate({ scrollTop: 0 }, "slow");
});

