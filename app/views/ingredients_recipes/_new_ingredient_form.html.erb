<% if @ingredients_recipe.display_name != nil %>
  <div id="ingredient-form-<%=@ingredients_recipe.id%>" class="new-ingredient-form">
<% else %>
  <div class="new-ingredient-form">
<% end %>
<%= simple_form_for @ingredients_recipe, remote: true  do |ingredients_recipe_form| %>
    <div class="row">
      <div class="form-group col-xs-2">
        <label for="exampleInputEmail1">Amount</label>
        <%= ingredients_recipe_form.input :amount, label: false, input_html: { class: "form-control", placeholder: "1 1/2"} %>
      </div>
      <div class="form-group col-xs-4">
        <label for="exampleInputEmail1">Measurement</label>
        <%= ingredients_recipe_form.input :amount_unit, input_html: { class: "unit-autofill form-control", data: {autocomplete_source: @units}}, placeholder: "cups", label: false %>
      </div>

      <div class="form-group col-xs-5">
        <label for="exampleInputEmail1">Ingredient</label>
        <%= ingredients_recipe_form.input :display_name, label: false, input_html: { class: "form-control", placeholder: "sliced frozen banana"} %>
      </div>
    </div>
    <div class="row">
      <div class="add-button-div form-group col-xs-4">
        <label for="exampleInputEmail1">Shopping List Item</label>
        <% if @ingredient.name == nil %> 
          <%= ingredients_recipe_form.fields_for :ingredient, @ingredient do |ingredient_form| %>
           <%= ingredient_form.input :name,  input_html: { class: "ingredient-autofill form-control", data: {autocomplete_source: @all_ingredients}}, placeholder: "banana", label: false %>
          <% end %> 
        <% else %>
          <h3><%=@ingredient.name %></h3>
          <p>delete and add new to change</p>
        <% end %>
      </div>
      <div class="form-group control-group">
        <label class="control-label">Only select if applicable</label>
        <div class="controls">
          <ul id="ingredient-radio-list" class="list-inline">
            <li> 
              <label class="radio inline">
                <input type="radio" name="ingredients_recipe[options]" value="main"/>
                  <span class="ingredient-radio-label">The Main Ingredient</span>
              </label>
            </li>
            <li> 
              <label class="radio inline">
                <input type="radio" name="ingredients_recipe[options]" value="optional"/>
                  <span class="ingredient-radio-label">An Optional Ingredient</span>
              </label>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="row text-center">
      <div class="form-group"> 
        <%= hidden_field_tag 'recipe_id', @recipe_id %>
        <% if @ingredients_recipe.display_name != nil %>
          <button type="submit" class="glyphicon glyphicon-plus-sign btn btn-success btn-lg">Update</button>
        <% else %>
          <button type="submit" class="glyphicon glyphicon-plus-sign btn btn-success btn-lg">Add</button>
        <% end %>
      </div>
    </div>

<% end%>
  </div>