<!-- set variables from update_user_health_groups.js.erb passed in as local variables -->
<% @family_members ||= family_members %>
<% @appointment ||= appointment %>
<% @user ||= user %>
<% @diseases ||= diseases %>
<% @intolerances ||= intolerances %>
<% @allergies ||= allergies%>
<% @diets ||=  diets  %>
				<div id="new-user-family-form" class="col-xs-10 col-xs-offset-1 in-session">
          <div class="col-xs-2 form-group">
          	<div id="family-member-list" class="row">
              <%@family_members.each do |family_member|%>
                <div class="col-xs-12">
                <% if family_member == @appointment.patient_focus %>

                  <button data-family-member-id="<%=family_member.id%>" id="family-member-<%=family_member.id%>" type="button" class="btn btn-white btn-sm family-member-health-preview selected-family-member"><%=family_member.first_name%> <%=family_member.last_name%> </button>
                <% else %>
                  <button data-family-member-id="<%=family_member.id%>" id="family-member-<%=family_member.id%>" type="button" class="btn btn-white btn-sm family-member-health-preview"><%=family_member.first_name%> <%=family_member.last_name%> </button>
                <% end %>
                </div>
              <% end %>
            </div>
          </div>
<% @family_members.each do |family_member| %>
  <% if family_member == @appointment.patient_focus %>
          <div id="family-member-health-<%=family_member.id%>" class="appt-focus col-xs-12 family-member-health-container alert alert-success">
  <% else %>
          <div id="family-member-health-<%=family_member.id%>" class="appt-focus col-xs-12 family-member-health-container alert alert-success hidden">
  <% end %>
						<%= simple_form_for family_member, :url => update_user_health_groups_path(family_member), method: :patch, remote: true do |f| %>
							<input type="hidden" name="updated_user_id" value="<%=family_member.id%>"/>
							<div id="top-container" class="col-xs-12 text-center">
						
								<%= render "/users/registrations/forms/name_form", f: f %>
							</div>
							<!-- Tab panes -->
							<div class="tab-content">
							  <div role="tabpanel" class="tab-pane fade in active" id="general">
					       	<div class="col-xs-12 text-left">
					       		<% if ( @user != family_member)%>
					       		<div class="row form-group">
					       			<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">
					       				<%= label_tag :family_role, "Relation to You:" %>
					       			</div>
					       			<div class="col-xs-12 col-sm-12 col-md-10 col-lg-10">
									      <%= f.input :family_role, label: false, placeholder: "Daughter", input_html: {id: "family-role-field", class: "form-control-6"} %>
									    </div>
								    </div>
								    <% end %>
									  <div class="row form-group">
									  	<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">
								     		<%= label_tag :birth_date, "Birth Date:" %>
								     	</div>
								     	<div class="col-xs-10">
								      	<%= f.date_select :date_of_birth, {prompt: { day: 'Day', month: 'Month', year: 'Year' }, start_year: Date.today.year, end_year: 1910, order: [:month, :day, :year]}, {:class => "form-control-3"} %>
								    	</div>
								    </div>
								    <div class="row form-group">
									  	<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">
								     		<%= label_tag :height_inches, "Height:" %>
								     	</div>
								     	<div id="height-attributes" class="col-xs-10">
								        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
								          <input type="number" name="user[height][feet]" placeholder="4" style="padding-left: 10%" value="<%=family_member.height_hash['feet']%>"/> 
								        </div>
								        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
								          <%= label_tag :feet, "feet"%>
								        </div>
								        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
								          <input type="number" name="user[height][inches]" placeholder="11" style="padding-left: 10%" value="<%=family_member.height_hash['inches']%>"/> 
								        </div>
								        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
												  <%= label_tag :inches, "inches"%>
								        </div>
							        </div>
							      </div>
							      <div class="row form-group">
									  	<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">
								     		<%= label_tag :weight_ounces, "Weight:" %>
								     	</div>
								     	<div id="weight-attributes" class="col-xs-10">
								        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
								          <input type="number" name="user[weight][pounds]" placeholder="100" style="padding-left: 10%" value="<%=family_member.weight_hash['pounds']%>"/> 
								        </div>
								        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
								          <%= label_tag :pounds, "pounds"%>
								        </div>
									     	<div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
								          <input type="number" name="user[weight][ounces]" placeholder="100" style="padding-left: 10%" value="<%=family_member.weight_hash['ounces']%>"/> 
								        </div>
							        	<div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
												  <%= label_tag :ounces, "ounces"%>
								        </div>
							        </div>
							      </div>
							      <div class="row">
									  	<div class="col-xs-2">
								     		<%= label_tag :sex, "Sex:" %>
								     	</div>
								     	<div class="col-xs-10">
							        	<%= f.input :sex, :collection => [["Female", "Female"], ["Male", 'Male']], :label_method => :last, :value_method => :first ,as: :radio_buttons, :item_wrapper_class => 'radio-inline', label: false %>
							        </div>
							      </div>
					      	</div>
					        <div class="col-xs-12">
					          <hr class="health-group-break-point">
					        </div>
					        
									<%= render "/users/registrations/forms/allergies", f: f %>
							  	<div class="col-xs-12 form-group">
							  	
								  	<label>Add More About <span class="dynamic-user-name"><%=family_member.first_name%></span></label>
								  	<p>(we will go over more together so don't feel like you have to fit it all in)</p>
								  	<textarea class="form-control form-group" placeholder="Nutrition can be complicated and we know that first hand.  Use this space for including more health information not mentioned above" name="user[family_note]" rows="4"></textarea>
								  </div>
								</div>
							</div>
							<div id="bottom-button-container" class="col-xs-12 text-center">
								<div class="hidden-xs hidden-sm col-md-8 col-lg-8 text-right">
									<p>Complete this nutrition profile</p>
								</div>
								<div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 col-md-2 col-md-offset-0 col-lg-2 col-lg-offset-0">
									<div class="col-xs-12 col-sm-12 hidden-md hidden-lg text-center">
										<p>Complete this nutrition profile</p>
									</div>
						  		<%= f.button :submit, "Save", class: "btn btn-success btn-block" %>
								</div>
							</div>
						<% end %>
					</div>
<% end %>
				</div>		