
<div id="welcome-add-family" class="fork-background" >

	<div id="addFamilyModel" class="modal fade in" style="display: block;">
	  <div class="modal-dialog">
	    <div class="modal-content">

	      <div class="modal-body">
	        <%= image_tag("/assets/logos/kf-logo-registration.png", class: "img-responsive logo") %>
	        <%= render "breadcrumbs" %>
	        <h1>Let's add a seat to your table!</h1>
	        <h4>For your first appointment, who's nutritional needs will we be focusing on?</h4>
					<div class="row">
		        <div class="form-group">
							<label class="radio-inline">
							  <input type="radio" name="appointment_focus" id="inlineRadio2" value="new-user-form">New Family Member
							</label>
							<label class="radio-inline">
							  <input type="radio" name="appointment_focus" id="inlineRadio1" value="user-form">Mine (<%=@user.first_name%>)
							</label>
							<% if @family && @family.children %>
								<% @family.children.each.with_index(1) do |family_member, index| %>
									<label class="radio-inline" id="family-member-select-<%=family_member.id%>">
									  <input type="radio" name="appointment_focus" id="inlineRadio<%=index+2%>" value="family-member-form-<%=index%>"><%=family_member.full_name%>
									</label>
								<% end %>
							<% end %>
						</div>
					</div>
					<%= simple_form_for(@user, :url => {:controller => 'welcome', :action => 'build_family'}, html: { method: :patch, class: 'col-xs-12 col-sm-10 col-sm-offset-1 text-left hidden user-form', role:"form" }) do |f| %>

					  <div class="form-group row">
					  	<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
					    	<%= f.input :first_name, autofocus: true, input_html: { class: "form-control"}, disabled: true %>
					    </div>
							<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
					    	<%= f.input :last_name, autofocus: true, input_html: { class: "form-control"}, disabled: true %>
					    </div>
					  </div>

					  <div class="row form-group">
				  		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
			     			<%= label_tag :birth_date, "Birth Date:" %>
			     		</div>
				     	<div class="col-xs-12">
				      	<%= f.date_select :date_of_birth, {prompt: { day: 'Day', month: 'Month', year: 'Year' }, start_year: Date.today.year, end_year: 1910, order: [:month, :day, :year]}, {:class => "form-control-3"} %>
				    	</div>
			    	</div>
						<div class="row form-group">
					  	<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">
				     		<%= label_tag :height_inches, "Height:" %>
				     	</div>
				     	<div id="height-attributes" class="col-xs-10">
				        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
				          <input type="number" name="user[height][feet]" placeholder="4" style="padding-left: 10%" value="<%=@user.height_hash['feet']%>"/> 
				        </div>
				        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
				          <%= label_tag :feet, "feet"%>
				        </div>
				        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
				          <input type="number" name="user[height][inches]" placeholder="11" style="padding-left: 10%" value="<%=@user.height_hash['inches']%>"/> 
				        </div>
				        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
								  <%= label_tag :inches, "inches"%>
				        </div>
			        </div>
			      </div>
			      <div class="row form-group">
					  	<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">
				     		<%= label_tag :weight_ounces, "Weight:" %>
				     	</div>
				     	<div id="weight-attributes" class="col-xs-10">
				        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
				          <input type="number" name="user[weight][pounds]" placeholder="100" style="padding-left: 10%" value="<%=@user.weight_hash['pounds']%>"/> 
				        </div>
				        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
				          <%= label_tag :pounds, "pounds"%>
				        </div>
					     	<div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
				          <input type="number" name="user[weight][ounces]" placeholder="100" style="padding-left: 10%" value="<%=@user.weight_hash['ounces']%>"/> 
				        </div>
			        	<div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
								  <%= label_tag :ounces, "ounces"%>
				        </div>
			        </div>
			      </div>
					  <div class="form-group row">
	  					<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
	  						<%= label_tag :sex, "Gender:" %>
					    	<%= f.input :sex, 
					    	:collection => [["female", 'Female'] ,["male", 'Male']],
					    	:label_method => :last, 
					    	:value_method => :first,
					    	:as => :radio_buttons_inline,
					    	:label => false %>
					    </div>
	  					<div class="pregnancy-container hidden col-xs-12 col-sm-12 col-md-6 col-lg-6">
	  						<div class="col-xs-12">
	  							<%= label_tag :pregnant, "Pregnant?" %>
	  						</div>
					    	<label class="radio-inline">
								  <input type="radio" name="pregnancy" id="inlineRadio1" value="yes"> Yes
								</label>
								<label class="radio-inline">
								  <input type="radio" name="pregnancy" id="inlineRadio2" value="no"> No
								</label>
					    </div>
					  </div>
					  <div class="row form-group due-date-container hidden">
				  		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
			     			<%= label_tag :due_date, "Due Date:" %>
			     		</div>
				     	<div class="col-xs-12">
				      	<%= f.date_select :due_date, {prompt: { day: 'Day', month: 'Month', year: 'Year' }, start_year: Date.today.year, end_year: Date.today.year+1, max_years_allowed: 5, order: [:month, :day, :year]}, {:class => "form-control-4"} %>
				    	</div>
			    	</div>
					  <div class="actions text-right">
					    <%= f.button :submit, "Next", class: "btn btn-primary btn-lg" %>
					  </div>
					<% end %>

					<% if @family && @family.children %>
						<% @family.children.each.with_index(1) do |family_member, index| %>
							<%= simple_form_for(family_member, :url => {:controller => 'welcome', :action => 'build_family'}, html: { method: :patch, class: "col-xs-12 col-sm-10 col-sm-offset-1 text-left hidden family-member-form-#{index}" , role:"form" }) do |f| %>

								<%= f.input :id, as: :hidden, :input_html => { :value => family_member.id }%>

								<div class="form-group row">
							  	<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
							    	<%= f.input :first_name, placeholder: "First", autofocus: true, input_html: { class: "form-control"} %>
							    </div>
									<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
							    	<%= f.input :last_name, autofocus: true, input_html: { class: "form-control"} %>
							    </div>
							  </div>
								<div class="form-group row">
									<div class="col-xs-12">
									<%= label_tag :family_role, "Relation to You:" %>
							    	<%= f.input :family_role, autofocus: true, input_html: { class: "form-control"}, placeholder: "Daughter", label: false %>
							    </div>
							  </div>
							  <div class="row form-group">
						  		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
					     			<%= label_tag :birth_date, "Birth Date:" %>
					     		</div>
						     	<div class="col-xs-12">
						      	<%= f.date_select :date_of_birth, {prompt: { day: 'Day', month: 'Month', year: 'Year' }, start_year: Date.today.year, end_year: 1910, order: [:month, :day, :year]}, {:class => "form-control-3"} %>
						    	</div>
					    	</div>
								<div class="row form-group">
							  	<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">
						     		<%= label_tag :height_inches, "Height:" %>
						     	</div>
						     	<div id="height-attributes" class="col-xs-10">
						        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
						          <input type="number" name="user[height][feet]" placeholder="4" style="padding-left: 10%" value="<%=family_member.height_hash['feet']%>"/> 
						        </div>
						        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
						          <%= label_tag :feet, "feet"%>
						        </div>
						        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
						          <input type="number" name="user[height][inches]" placeholder="11" style="padding-left: 10%" value="<%=family_member.height_hash['inches']%>"/> 
						        </div>
						        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
										  <%= label_tag :inches, "inches"%>
						        </div>
					        </div>
					      </div>
					      <div class="row form-group">
							  	<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">
						     		<%= label_tag :weight_ounces, "Weight:" %>
						     	</div>
						     	<div id="weight-attributes" class="col-xs-10">
						        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
						          <input type="number" name="user[weight][pounds]" placeholder="100" style="padding-left: 10%" value="<%=family_member.weight_hash['pounds']%>"/> 
						        </div>
						        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
						          <%= label_tag :pounds, "pounds"%>
						        </div>
							     	<div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
						          <input type="number" name="user[weight][ounces]" placeholder="100" style="padding-left: 10%" value="<%=family_member.weight_hash['ounces']%>"/> 
						        </div>
					        	<div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
										  <%= label_tag :ounces, "ounces"%>
						        </div>
					        </div>
					      </div>
							  <div class="form-group row">
			  					<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
			  						<%= label_tag :sex, "Gender:" %>
							    	<%= f.input :sex, 
							    	:collection => [["female", 'Female'] ,["male", 'Male']],
							    	:label_method => :last, 
							    	:value_method => :first,
							    	:as => :radio_buttons_inline,
							    	:label => false %>
							    </div>
			  					<div class="pregnancy-container hidden col-xs-12 col-sm-12 col-md-6 col-lg-6">
			  				
			  						<div class="col-xs-12">
			  							<%= label_tag :pregnant, "Pregnant?" %>
			  						</div>
							    	<label class="radio-inline">
										  <input type="radio" name="pregnancy" id="inlineRadio1" value="yes"> Yes
										</label>
										<label class="radio-inline">
										  <input type="radio" name="pregnancy" id="inlineRadio2" value="no"> No
										</label>

								  </div>
							  </div>

							  <div class="row form-group due-date-container hidden">
						  		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
					     			<%= label_tag :due_date, "Due Date:" %>
					     		</div>
						     	<div class="col-xs-12">
						      	<%= f.date_select :due_date, {prompt: { day: 'Day', month: 'Month', year: 'Year' }, start_year: Date.today.year, end_year: Date.today.year+1, max_years_allowed: 5, order: [:month, :day, :year]}, {:class => "form-control-4"} %>
						    	</div>
					    	</div>
							  <div class="actions text-right">
							  <%= link_to "delete family member", remove_family_member_path(@family, family_member), :confirm => "Are you sure you want to delete #{family_member.full_name}?", :method => :delete, remote: true %>
							    <%= f.button :submit, "Next", class: "btn btn-primary btn-lg" %>
							  </div>
							<% end %>
						<% end %>
					<% end %>

					<%= simple_form_for(@new_user, :url => {:controller => 'welcome', :action => 'build_family'}, html: { method: :patch, class: 'col-xs-12 col-sm-10 col-sm-offset-1 text-left hidden new-user-form', role:"form" }) do |f| %>
						<div class="form-group row">
					  	<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
					    	<%= f.input :first_name, placeholder: "First", autofocus: true, input_html: { class: "form-control"} %>
					    </div>
							<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
					    	<%= f.input :last_name, autofocus: true, input_html: { class: "form-control"} %>
					    </div>
					  </div>
						<div class="form-group row">
							<div class="col-xs-12">
							<%= label_tag :family_role, "Relation to You:" %>
					    	<%= f.input :family_role, autofocus: true, input_html: { class: "form-control"}, placeholder: "Daughter", label: false %>
					    </div>
					  </div>
					  <div class="row form-group">
				  		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
			     			<%= label_tag :birth_date, "Birth Date:" %>
			     		</div>
				     	<div class="col-xs-12">
				      	<%= f.date_select :date_of_birth, {prompt: { day: 'Day', month: 'Month', year: 'Year' }, start_year: Date.today.year, end_year: 1910, order: [:month, :day, :year]}, {:class => "form-control-3"} %>
				    	</div>
			    	</div>
						<div class="row form-group">
					  	<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">
				     		<%= label_tag :height_inches, "Height:" %>
				     	</div>
				     	<div id="height-attributes" class="col-xs-10">
				        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
				          <input type="number" name="user[height][feet]" placeholder="4" style="padding-left: 10%" value="<%=@new_user.height_hash['feet']%>"/> 
				        </div>
				        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
				          <%= label_tag :feet, "feet"%>
				        </div>
				        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
				          <input type="number" name="user[height][inches]" placeholder="11" style="padding-left: 10%" value="<%=@new_user.height_hash['inches']%>"/> 
				        </div>
				        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
								  <%= label_tag :inches, "inches"%>
				        </div>
			        </div>
			      </div>
			      <div class="row form-group">
					  	<div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">
				     		<%= label_tag :weight_ounces, "Weight:" %>
				     	</div>
				     	<div id="weight-attributes" class="col-xs-10">
				        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
				          <input type="number" name="user[weight][pounds]" placeholder="100" style="padding-left: 10%" value="<%=@new_user.weight_hash['pounds']%>"/> 
				        </div>
				        <div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
				          <%= label_tag :pounds, "pounds"%>
				        </div>
					     	<div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
				          <input type="number" name="user[weight][ounces]" placeholder="100" style="padding-left: 10%" value="<%=@new_user.weight_hash['ounces']%>"/> 
				        </div>
			        	<div class="col-xs-3 col-sm-2 col-md-2 col-lg-2">
								  <%= label_tag :ounces, "ounces"%>
				        </div>
			        </div>
			      </div>
					  <div class="form-group row">
	  					<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
	  						<%= label_tag :sex, "Gender:" %>
					    	<%= f.input :sex, 
					    	:collection => [["female", 'Female'] ,["male", 'Male']],
					    	:label_method => :last, 
					    	:value_method => :first,
					    	:as => :radio_buttons_inline,
					    	:label => false %>
					    </div>
	  					<div class="pregnancy-container hidden col-xs-12 col-sm-12 col-md-6 col-lg-6">
	  						<div class="col-xs-12">
	  							<%= label_tag :pregnant, "Pregnant?" %>
	  						</div>
					    	<label class="radio-inline">
								  <input type="radio" name="pregnancy" id="inlineRadio1" value="yes"> Yes
								</label>
								<label class="radio-inline">
								  <input type="radio" name="pregnancy" id="inlineRadio2" value="no"> No
								</label>
						  </div>
					  </div>
					  <div class="row form-group due-date-container hidden">
				  		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
			     			<%= label_tag :due_date, "Due Date:" %>
			     		</div>
				     	<div class="col-xs-12">
				      	<%= f.date_select :due_date, {prompt: { day: 'Day', month: 'Month', year: 'Year' }, start_year: Date.today.year, end_year: Date.today.year+1, max_years_allowed: 5, order: [:month, :day, :year]}, {:class => "form-control-4"} %>
				    	</div>
			    	</div>
					  <div class="actions text-right">
					    <%= f.button :submit, "Next", class: "btn btn-primary btn-lg" %>
					  </div>
					<% end %>
	      </div>
	      <div class="modal-footer">
	      </div>
	    </div><!-- /.modal-content -->
	  </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->	
</div>


