
$("#steps-container").replaceWith("<%= j render(:partial => 'steps_list') %>");

$("#new-steps-form").replaceWith("<%= j render(:partial => '/recipes/new_step_form') %>");
$(".hidden-form").show();

// creates sortable list of steps //



$("#sortable").sortable({
  placeholder: "ui-state-highlight",
  connectWith: ".column",
  start: function(e, ui){
      ui.placeholder.height(ui.item.height())
  },
  axis: 'y',
  update: function() {
    return $.post($(this).data('update-url'), $(this).sortable("serialize"))
  }
});

$( "#sortable" ).disableSelection();

// next button goes to next step
$(".next-button").on("click", function(){
  $("#new-steps-form").replaceWith("<%= j render(:partial => 'allergens_ingredient_form') %>");
  $("#recipe-essentials-preview").replaceWith("<%= j render(:partial => '/recipes/allergens_ingredient_preview') %>");
  $( ".allergen-autofill" ).autocomplete({
      source: $('.allergen-autofill').data('autocomplete-source')
  });
});



$( ".ingredient-name-autofill" ).autocomplete({
      source: $('.ingredient-name-autofill').data('autocomplete-source')
});
$(".unit-autofill").autocomplete({
      source: $('.unit-autofill').data('autocomplete-source')
});


$("#new_recipe_step").validate({
  rules: {
    "recipe_step[directions]":{
      required: true,
      minlength: 10
    }
  },
  messages: {
    "recipe_step[directions]":{
      required: "Enter directions",
      minlength: "At least 10 letters"
    }
  }
});